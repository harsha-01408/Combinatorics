LVADER - Luke vs. Darth Vader
#combinatorics

You know one of the most dangerous villain of all time, it's Darth Vader. It's time to stop him and Master Luke is looking forward to fight against him. They both are in an infinite two-dimensional grid. Each cell is denoted by (x, y). Here x denotes the row number and y denotes the column number of that cell. Please have a look on that picture of 5 × 7 grid to understand.

0, 0  0, 1  0, 2  0, 3  0, 4  0, 5  0, 6
1, 0
2, 0
3, 0
4, 0

Luke stays at a cell (x1, y1) and Vader stays at another cell (x2, y2). It is guaranteed that x1 ≤ x2 and y1 ≤ y2. Master Luke needs to reach Vader’s cell. Each time Luke can move one step below horizontally or vertically or diagonally. That means, if his position is (x, y) then he can move to (x+1, y) or (x, y+1) or (x+1, y+1) cell in a single move. Given Luke and Vader’s position you have to determine in how many ways Luke can reach to the Vader’s cell. As the answer can be very large output the solution modulo 10^9 + 7.

Input
Input starts with an integer (T ≤ 50) which denotes the number of test case. Each test case consists four integer x1, y1, x2, y2 (0 ≤ x1 ≤ x2 ≤ 100000 and 0 ≤ y1 ≤ y2 ≤ 100000), the position of Luke and Vader.

Output
For each test case, print the number of ways Luke can reach to the Vader’s cell modulo 10^9 + 7.

Example
Input:
3
1 2 2 3
2 2 3 3
3 4 3 5

Output:
Case 1: 3
Case 2: 3
Case 3: 1

Explanation
In the first case he can move from (1, 2) to (2, 3) in the following 3 ways:
(1, 2) → (1, 3) → (2, 3)
(1, 2) → (2, 2) → (2, 3)
(1, 2) → (2, 3)


XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Dark Room

You are in a room full of bulbs. The i-th bulb has an integer intensity ai.
If a bulb is ON, it contributes its intensity to the room’s overall intensity by
multiplication: the overall intensity is the product of the intensities of all bulbs that are ON.

A positive intensity brightens the room; a negative intensity darkens it.
You want to sleep, so you are interested in selections of bulbs whose overall intensity is NEGATIVE.

Task
Count how many ON/OFF selections (subsets of bulbs) make the overall intensity negative.
Print the answer modulo 1,000,000,007.

Notes
• A subset is valid if and only if the number of chosen bulbs with negative intensity is odd.
• Any bulb with intensity 0 cannot be included in a valid selection (the product would be 0).

Input Format
• The first line contains an integer N — the number of bulbs.
• The next N integers (separated by spaces or newlines) are the intensities a1, a2, …, aN.

Output Format
• Print a single integer: the number of subsets whose product is negative, modulo 1,000,000,007.

Constraints
• 1 ≤ N ≤ 10^5
• −100 ≤ ai ≤ 100

Sample Input
3
-1
2
-3

Sample Output
4

Explanation
Valid subsets (product < 0):
{-1}, {-1, 2}, {2, -3}, {-3} → total = 4.

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX


Count Binary Strings with Limited Zeros After Each 1

Given two integers n and k, count the number of binary strings of length n such that
for every '1' in the string, the number of consecutive '0's that follow it (until the next '1'
or the end of the string) is at most k.

Notes
• Leading zeros before the first '1' are unrestricted.
• The condition is vacuously true if the string has no '1's (the all-zero string is allowed).
• If the problem version requires “at least one ‘1’ ”, subtract 1 from the final count.

Input Format
n k

Output Format
Print a single integer: the number of valid binary strings of length n.

Constraints
• 1 ≤ n ≤ 10^6  (typical; adjust as needed)
• 0 ≤ k ≤ n
• Answer may be large; if required, output modulo 1,000,000,007.

Example
Input
3 1
Output
7

Explanation
Valid strings (n=3, k=1):
000, 001, 010, 011, 101, 110, 111
(“100” is invalid because it has two zeros after a ‘1’.)


XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

F - Almost Sorted 2
Time Limit: 2 sec / Memory Limit: 1024 MiB
Score : 500 points

Problem Statement
You are given an integer sequence A=(A1,A2,…,AN) of length N and a positive integer D.

Find the number, modulo 998244353, of integer sequences B=(B1,B2,…,BN) that can be obtained by rearranging A and satisfy the following condition:

Bi+1 ≥ Bi − D holds for all i (1≤i≤N−1).

Constraints
2≤N≤2×10^5
1≤D≤10^6
1≤Ai≤10^6
All input values are integers.

Input
The input is given from Standard Input in the following format:

N D
A1 A2 … AN

Output
Print the answer.

Sample Input 1
4 1
5 2 1 2
Sample Output 1
3
The integer sequences satisfying the condition are (1,2,2,5),(2,1,2,5),(2,2,1,5).

Sample Input 2
5 10
20 40 60 80 100
Sample Output 2
1

Sample Input 3
15 12345
18270 31252 27543 31406 22271 13402 12279 25697 18349 27615 39360 22790 32581 23990 36154
Sample Output 3
858152905

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
